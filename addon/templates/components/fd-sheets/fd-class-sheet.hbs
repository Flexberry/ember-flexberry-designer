<div class="content-mini">
  <div class="ui {{if loadingState "active"}} inverted dimmer">
    <div class="ui text loader"></div>
  </div>
  <div class="fd-sheet-header">
    {{fd-sheets/fd-sheets-tool-bar
      sheetComponentName=sheetComponentName
      readonlyMode=readonlyMode
      isNewModel=selectedValue.model.data.isNew
      sheetButtons=(array 'delete' 'save' 'share')
      toolbarVisible=(not isAddMode)
      shareSheetValue=selectedValue.model.data
      saveSheet=(action 'save')
      deleteSheet=(action 'delete')
    }}
    {{flexberry-textbox
      value=computedTitle
      placeholder=(t "components.fd-sheets-tool-bar.placeholder-caption")
      readonly=(and (not selectedValue.model.data.isNew) readonlyMode)
      class='form-header fluid'
      maxlength=maxlength
    }}
  </div>
  <div class="fd-sheet-body">
    {{#if isAddMode}}
      {{fd-editing-panels/fd-create-entity
        createClassAction=createClass
      }}
    {{else}}
      {{#if (known-for-type (concat "fd-editing-panels/fd-" componentNamePart "-editing-panel"))}}
        {{component (concat "fd-editing-panels/fd-" componentNamePart "-editing-panel")
          model=selectedValue.model.data
          readonlyMode=readonlyMode
          dataobject=selectedValue.dataobject
          openViewSheetController=(action 'openNestedSheet')
        }}
      {{else}}
        {{fd-editing-panels/fd-custom-editing-panel
          model=selectedValue.model.data
          readonlyMode=readonlyMode
        }}
      {{/if}}
    {{/if}}
  </div>
</div>
