<h2 class='form-header'>
  {{t "forms.fd-diagrams.caption"}}
</h2>

<form class="ui form flexberry-vertical-form">
  <div class="ui stackable grid fd-list">
    <div class="row">
      <div class="three wide column light-text">
        {{t "forms.fd-diagrams.type-caption"}}
      </div>
      <div class="thirteen wide column">
        {{
          fd-search-input
          value=searchValue
        }}
      </div>
    </div>
    <div class="row">
      <div class="right floated thirteen wide column">
        {{
          fd-button
          caption=(t "forms.fd-diagrams.create-button")
          click=(action 'openCreateDiagramsEditPanel')
        }}
      </div>
    </div>

    {{!-- ad --}}
    {{#if (not-eq filteredModel.ad.length 0)}}
    <div class="row">
      <div class="three wide column light-text">
        {{t "forms.fd-diagrams.ad"}}
      </div>
      <div class="thirteen wide column">
        {{#each filteredModel.ad as |ad|}}
          {{
            fd-list-item
            model=ad
            caption=ad.data.name
            sheetComponentName=sheetComponentName
          }}
        {{/each}}
      </div>
      <div class="right floated thirteen wide column">
        {{
          fd-button
          caption=(t "forms.fd-diagrams.ad")
          click=(action 'createDiagram' 'ad')
        }}
      </div>
    </div>
    {{/if}}

    {{!-- cad --}}
    {{#if (not-eq filteredModel.cad.length 0)}}
    <div class="row">
      <div class="three wide column light-text">
        {{t "forms.fd-diagrams.cad"}}
      </div>
      <div class="thirteen wide column">
        {{#each filteredModel.cad as |cad|}}
          {{
            fd-list-item
            model=cad
            caption=cad.data.name
            sheetComponentName=sheetComponentName
          }}
        {{/each}}
      </div>
      <div class="right floated thirteen wide column">
        {{
          fd-button
          caption=(t "forms.fd-diagrams.cad")
          click=(action 'createDiagram' 'cad')
        }}
      </div>
    </div>
    {{/if}}

    {{!-- cod --}}
    {{#if (not-eq filteredModel.cod.length 0)}}
    <div class="row">
      <div class="three wide column light-text">
        {{t "forms.fd-diagrams.cod"}}
      </div>
      <div class="thirteen wide column">
        {{#each filteredModel.cod as |cod|}}
          {{
            fd-list-item
            model=cod
            caption=cod.data.name
            sheetComponentName=sheetComponentName
          }}
        {{/each}}
      </div>
      <div class="right floated thirteen wide column">
        {{
          fd-button
          caption=(t "forms.fd-diagrams.cod")
          click=(action 'createDiagram' 'cod')
        }}
      </div>
    </div>
    {{/if}}

    {{!-- dpd --}}
    {{#if (not-eq filteredModel.dpd.length 0)}}
    <div class="row">
      <div class="three wide column light-text">
        {{t "forms.fd-diagrams.dpd"}}
      </div>
      <div class="thirteen wide column">
        {{#each filteredModel.dpd as |dpd|}}
          {{
            fd-list-item
            model=dpd
            caption=dpd.data.name
            sheetComponentName=sheetComponentName
          }}
        {{/each}}
      </div>
      <div class="right floated thirteen wide column">
        {{
          fd-button
          caption=(t "forms.fd-diagrams.dpd")
          click=(action 'createDiagram' 'dpd')
        }}
      </div>
    </div>
    {{/if}}

    {{!-- sd --}}
    {{#if (not-eq filteredModel.sd.length 0)}}
    <div class="row">
      <div class="three wide column light-text">
        {{t "forms.fd-diagrams.sd"}}
      </div>
      <div class="thirteen wide column">
        {{#each filteredModel.sd as |sd|}}
          {{
            fd-list-item
            model=sd
            caption=sd.data.name
            sheetComponentName=sheetComponentName
          }}
        {{/each}}
      </div>
      <div class="right floated thirteen wide column">
        {{
          fd-button
          caption=(t "forms.fd-diagrams.sd")
          click=(action 'createDiagram' 'sd')
        }}
      </div>
    </div>
    {{/if}}

    {{!-- std --}}
    {{#if (not-eq filteredModel.std.length 0)}}
    <div class="row">
      <div class="three wide column light-text">
        {{t "forms.fd-diagrams.std"}}
      </div>
      <div class="thirteen wide column">
        {{#each filteredModel.std as |std|}}
          {{
            fd-list-item
            model=std
            caption=std.data.name
            sheetComponentName=sheetComponentName
          }}
        {{/each}}
      </div>
      <div class="right floated thirteen wide column">
        {{
          fd-button
          caption=(t "forms.fd-diagrams.std")
          click=(action 'createDiagram' 'std')
        }}
      </div>
    </div>
    {{/if}}

    {{!-- ucd --}}
    {{#if (not-eq filteredModel.ucd.length 0)}}
    <div class="row">
      <div class="three wide column light-text">
        {{t "forms.fd-diagrams.ucd"}}
      </div>
      <div class="thirteen wide column">
        {{#each filteredModel.ucd as |ucd|}}
          {{
            fd-list-item
            model=ucd
            caption=ucd.data.name
            sheetComponentName=sheetComponentName
          }}
        {{/each}}
      </div>
      <div class="right floated thirteen wide column">
        {{
          fd-button
          caption=(t "forms.fd-diagrams.ucd")
          click=(action 'createDiagram' 'ucd')
        }}
      </div>
    </div>
    {{/if}}

  </div>
</form>


{{#fd-sheet
  title=computedTitle
  saveController=(action 'save')
  deleteController=(action 'delete')
  sheetComponentName=sheetComponentName
  toolbarVisible=(not isAddMode)
  isNewModel=selectedElement.model.data.isNew
}}
  {{#if isAddMode}}
    {{fd-editing-panels/fd-create-diagrams
      createDiagramAction=(action 'createDiagram')
    }}
  {{else}}
    {{#if isDiagramVisible}}
      {{fd-uml-diagram-editor
        model=selectedElement.model.data
        emptyReferenceCountItems=emptyReferenceCountItems
        sheetComponentName=sheetComponentName
        openEditFormAction=(action "openObjectEditForm")
      }}
    {{/if}}
  {{/if}}
{{/fd-sheet}}

{{#fd-sheet
  title=editableObject.name
  saveController=(action "saveEditableObject")
  sheetComponentName=objectEditFormSheet
  readonly=true
  isNewModel=true
}}
  {{#if (known-for-type (concat "fd-editing-panels/fd-" objectEditFormNamePart "-editing-panel"))}}
    {{component (concat "fd-editing-panels/fd-" objectEditFormNamePart "-editing-panel")
      model=editableObject
    }}
  {{else}}
    {{fd-editing-panels/fd-custom-editing-panel
      model=editableObject
    }}
  {{/if}}
{{/fd-sheet}}

{{#if show}}
  {{flexberry-dialog
    caption=(t "components.fd-modal-message-box.confirmation-caption")
    content=messageText
    approve=(action "closeWithSaving")
    deny=(action "closeWithoutSaving")
    hide=(action "closeDialog")
    approveButtonCaption=(t "components.fd-modal-message-box.confirmation-approve")
    denyButtonCaption=(t "components.fd-modal-message-box.confirmation-deny")
    visible=true
  }}
{{/if}}

